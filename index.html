<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <title>HushHush</title>
  <meta name="theme-color" content="#0f1219">
  <meta name="color-scheme" content="dark">
  <link rel="icon" type="image/png" sizes="96x96" href="icon-96.png">
  <link rel="apple-touch-icon" href="icon-256.png">
  <meta name="format-detection" content="telephone=no">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="preload" href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600&display=swap" as="style">
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@300;400;500;600&display=swap" rel="stylesheet">
  <style>
    :root {
      --bg: #0f1219;
      --surface: #161c28;
      --surface-up: #1c2333;
      --border: #242d3e;
      --border-light: #2e3a50;
      --text-dim: #4e5872;
      --text-muted: #7a849a;
      --text: #b0b8c8;
      --text-bright: #dce0ea;
      --accent: #91b8b0;
      --accent-bright: #aed0c8;
      --accent-glow: rgba(145, 184, 176, 0.12);
      --accent-glow-strong: rgba(145, 184, 176, 0.25);
      --danger: #c47070;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: "Plus Jakarta Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;
      font-weight: 300;
      background: var(--bg);
      background-image: radial-gradient(ellipse at 50% 25%, #151c2c 0%, var(--bg) 70%);
      color: var(--text);
      min-height: 100dvh;
      display: flex;
      align-items: flex-start;
      justify-content: center;
      user-select: none;
      -webkit-user-select: none;
      padding: env(safe-area-inset-top) env(safe-area-inset-right) env(safe-area-inset-bottom) env(safe-area-inset-left);
      overflow-y: auto;
    }
    .app {
      position: relative;
      width: 100%; max-width: 440px;
      padding: 2rem 1.5rem 3rem;
    }
    body::before {
      content: '';
      position: fixed; inset: 0;
      background: radial-gradient(ellipse at 50% 35%,
        rgba(20, 31, 40, 0.4) 0%,
        transparent 35%,
        rgba(8, 10, 16, 0.35) 100%);
      pointer-events: none;
      opacity: 0;
      transition: opacity 1.5s ease;
      z-index: -1;
    }
    body.playing::before {
      opacity: 1;
      animation: ambientBreathe 8s ease-in-out 1.5s infinite;
    }
    @keyframes ambientBreathe {
      0%, 100% { opacity: 0.88; }
      50% { opacity: 1; }
    }
    @media (min-height: 700px) { body { align-items: center; } }

    /* Staggered entrance */
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    @keyframes heroIn {
      from { opacity: 0; transform: scale(0.85); }
      to { opacity: 1; transform: scale(1); }
    }
    .app > * {
      animation: fadeIn 0.5s ease-out both;
    }
    .app > .play-btn {
      animation: heroIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) both;
      animation-delay: 0.08s;
    }
    .app > :nth-child(1) { animation-delay: 0s; }
    .app > :nth-child(2) { animation-delay: 0.04s; }
    .app > :nth-child(4) { animation-delay: 0.12s; }
    .app > :nth-child(5) { animation-delay: 0.15s; }
    .app > :nth-child(6) { animation-delay: 0.18s; }
    .app > :nth-child(7) { animation-delay: 0.20s; }
    .app > :nth-child(8) { animation-delay: 0.22s; }
    .app > :nth-child(9) { animation-delay: 0.24s; }
    .app > :nth-child(10) { animation-delay: 0.26s; }
    .app > :nth-child(n+11) { animation-delay: 0.28s; }

    /* Title */
    h1 {
      font-family: "Plus Jakarta Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;
      font-size: 1.5rem;
      font-weight: 600;
      text-align: center;
      margin-bottom: 0.4rem;
      color: var(--text-bright);
      letter-spacing: 0.06em;
    }

    .status {
      text-align: center;
      font-size: 0.78rem;
      font-weight: 400;
      color: var(--accent);
      margin-bottom: 1.5rem;
      min-height: 1.2em;
      letter-spacing: 0.02em;
      font-variant-numeric: tabular-nums;
      transition: opacity 0.3s ease;
    }
    .status.fade-out {
      opacity: 0;
    }

    /* Play button */
    .play-btn {
      position: relative;
      width: 96px; height: 96px;
      border-radius: 50%;
      border: 2px solid var(--border-light);
      background: transparent;
      color: var(--text-bright);
      cursor: pointer;
      display: flex; align-items: center; justify-content: center;
      margin: 0 auto 2rem;
      transition: border-color 0.4s, background 0.4s, box-shadow 0.4s, transform 0.1s ease;
    }
    .play-btn::before {
      content: '';
      position: absolute;
      inset: -24px;
      border-radius: 50%;
      background: radial-gradient(circle, var(--accent-glow-strong), transparent 70%);
      opacity: 0;
      transition: opacity 0.6s;
      pointer-events: none;
    }
    .play-btn:hover { border-color: var(--accent); }
    .play-btn:active { transform: scale(0.92); }
    .play-btn.active {
      border-color: var(--accent);
      background: var(--accent-glow);
      box-shadow: 0 0 30px var(--accent-glow);
    }
    .play-btn.active::before {
      opacity: 1;
      animation: breathe 4s ease-in-out infinite;
    }
    .play-btn.loading {
      border-color: var(--accent);
      animation: pulse 1.4s ease-in-out infinite;
    }
    @keyframes pulse { 0%,100% { opacity: 0.4; } 50% { opacity: 1; } }
    @keyframes breathe {
      0%, 100% { transform: scale(1); opacity: 0.5; }
      50% { transform: scale(1.2); opacity: 1; }
    }
    .play-btn svg { width: 30px; height: 30px; fill: currentColor; }
    #stopIcon, #loadIcon { display: none; }

    /* Color selector */
    .colors {
      display: flex; gap: 0.5rem; justify-content: center;
      margin-top: 0.2rem; margin-bottom: 1.8rem; flex-wrap: wrap;
    }
    .color-btn {
      padding: 0.55rem 0.8rem;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--text-muted);
      font-family: "Plus Jakarta Sans", sans-serif;
      font-size: 0.78rem;
      font-weight: 400;
      cursor: pointer;
      transition: border-color 0.25s, color 0.25s, background 0.25s, transform 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
      display: flex; align-items: center; gap: 0.4rem;
    }
    .color-btn::before {
      content: '';
      width: 7px; height: 7px;
      border-radius: 50%;
      flex-shrink: 0;
    }
    .color-btn[data-color="white"]::before { background: #c8c8c8; }
    .color-btn[data-color="pink"]::before { background: #d4849a; }
    .color-btn[data-color="brown"]::before { background: #a07858; }
    .color-btn[data-color="blue"]::before { background: #6898c8; }
    .color-btn[data-color="violet"]::before { background: #9478c0; }
    .color-btn:hover { border-color: var(--text-dim); color: var(--text); }
    .color-btn:active { transform: scale(0.95); transition-duration: 0.1s; transition-timing-function: ease; }
    .color-btn.active {
      border-color: var(--accent);
      color: var(--text-bright);
      background: var(--accent-glow);
      transform: scale(1.04);
    }

    /* Sliders */
    .control { margin-bottom: 1.3rem; }
    .control label {
      display: flex; justify-content: space-between;
      font-size: 0.7rem; color: var(--text-dim);
      font-weight: 400;
      margin-bottom: 0.4rem;
      text-transform: uppercase; letter-spacing: 0.08em;
    }
    .control label span:last-child {
      color: var(--text-muted);
      font-variant-numeric: tabular-nums;
    }
    input[type="range"] {
      -webkit-appearance: none; appearance: none;
      width: 100%; height: 4px;
      border-radius: 2px;
      background: linear-gradient(to right, var(--accent) 0%, var(--accent) var(--fill, 0%), var(--border) var(--fill, 0%), var(--border) 100%);
      outline: none;
      touch-action: none;
    }
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance: none;
      width: 26px; height: 26px;
      border-radius: 50%;
      background: var(--accent);
      cursor: pointer;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3), 0 0 0 4px var(--accent-glow);
      transition: box-shadow 0.2s;
    }
    input[type="range"]::-webkit-slider-thumb:hover {
      box-shadow: 0 2px 12px rgba(0,0,0,0.4), 0 0 0 6px var(--accent-glow);
    }
    input[type="range"]::-webkit-slider-thumb:active {
      transform: scale(1.15);
      background: var(--accent-bright);
      box-shadow: 0 2px 12px rgba(0,0,0,0.4), 0 0 0 8px var(--accent-glow);
    }
    input[type="range"]::-moz-range-thumb {
      width: 26px; height: 26px;
      border-radius: 50%;
      background: var(--accent);
      cursor: pointer; border: none;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }
    input[type="range"]::-moz-range-thumb:active {
      transform: scale(1.15);
      background: var(--accent-bright);
      box-shadow: 0 2px 12px rgba(0,0,0,0.4), 0 0 0 8px var(--accent-glow);
    }

    /* Section dividers & headers */
    .divider {
      margin: 1.2rem 0;
      border-top: 1px solid var(--border);
    }
    .section-label {
      font-size: 0.68rem;
      font-weight: 500;
      color: var(--text-dim);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin: 1.2rem 0 0.8rem;
      padding-top: 0.8rem;
      border-top: 1px solid var(--border);
    }

    /* Collapsible advanced controls */
    .advanced-controls {
      display: grid;
      grid-template-rows: 0fr;
      opacity: 0;
      transition: grid-template-rows 0.3s ease, opacity 0.2s ease;
    }
    .advanced-controls.open {
      grid-template-rows: 1fr;
      opacity: 1;
    }
    .advanced-inner {
      overflow: hidden;
    }
    .customize-toggle {
      display: block;
      margin-bottom: 1rem;
      padding: 0.35rem 0;
      border: none;
      background: transparent;
      color: var(--text-dim);
      font-family: "Plus Jakarta Sans", sans-serif;
      font-size: 0.72rem;
      font-weight: 400;
      letter-spacing: 0.06em;
      text-transform: uppercase;
      cursor: pointer;
      transition: color 0.2s;
    }
    .customize-toggle:hover {
      color: var(--text-muted);
    }
    .customize-toggle .toggle-arrow {
      display: inline-block;
      transition: transform 0.2s;
    }
    .customize-toggle.open .toggle-arrow {
      transform: rotate(180deg);
    }

    /* Timer disabled state */
    .timer-row.disabled .timer-btn {
      opacity: 0.5;
      pointer-events: none;
    }

    /* Presets */
    .presets { display: flex; gap: 0.4rem; flex-wrap: wrap; margin-bottom: 0.6rem; }
    .preset-btn {
      padding: 0.55rem 0.85rem;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--text-muted);
      font-family: "Plus Jakarta Sans", sans-serif;
      font-size: 0.78rem;
      font-weight: 400;
      cursor: pointer;
      transition: border-color 0.25s, color 0.25s, background 0.25s, transform 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .preset-btn:hover { border-color: var(--text-dim); color: var(--text); }
    .preset-btn:active { transform: scale(0.95); transition-duration: 0.1s; transition-timing-function: ease; }
    .preset-btn.active {
      border-color: var(--accent);
      color: var(--text-bright);
      background: var(--accent-glow);
      transform: scale(1.04);
    }
    .preset-btn .delete-x {
      display: none;
      margin-left: 0.3rem;
      color: var(--danger);
      font-weight: bold;
    }
    .preset-btn.custom:hover .delete-x { display: inline; }

    .preset-actions { display: flex; gap: 0.4rem; margin-top: 0.5rem; }
    .action-btn {
      padding: 0.35rem 0.7rem;
      border-radius: 999px;
      border: 1px dashed var(--border-light);
      background: transparent;
      color: var(--text-dim);
      font-family: "Plus Jakarta Sans", sans-serif;
      font-size: 0.76rem;
      font-weight: 400;
      cursor: pointer;
      transition: border-color 0.2s, color 0.2s, background 0.2s, transform 0.25s cubic-bezier(0.34, 1.56, 0.64, 1);
    }
    .action-btn:hover { border-color: var(--accent); color: var(--text); }
    .action-btn:active { transform: scale(0.95); transition-duration: 0.1s; transition-timing-function: ease; }

    /* Timer */
    .timer-row { display: flex; gap: 0.4rem; justify-content: center; }
    .timer-btn {
      padding: 0.55rem 0.9rem;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--text-muted);
      font-family: "Plus Jakarta Sans", sans-serif;
      font-size: 0.78rem;
      font-weight: 400;
      cursor: pointer;
      transition: border-color 0.25s, color 0.25s, background 0.25s, transform 0.25s cubic-bezier(0.34, 1.56, 0.64, 1), opacity 0.3s ease;
    }
    .timer-btn:hover { border-color: var(--text-dim); color: var(--text); }
    .timer-btn:active { transform: scale(0.95); transition-duration: 0.1s; transition-timing-function: ease; }
    .timer-btn.active {
      border-color: var(--accent);
      color: var(--text-bright);
      background: var(--accent-glow);
      transform: scale(1.04);
    }

    /* Utility buttons â€” fixed top-left */
    .utility-row {
      position: fixed;
      top: calc(0.6rem + env(safe-area-inset-top));
      right: calc(0.6rem + env(safe-area-inset-right));
      display: flex; gap: 0.4rem;
      z-index: 5;
    }
    .utility-btn {
      height: 32px;
      padding: 0 0.65rem;
      border-radius: 999px;
      border: 1px solid var(--border);
      background: var(--surface);
      color: var(--text-dim);
      cursor: pointer;
      display: flex; align-items: center; gap: 0.35rem;
      font-family: "Plus Jakarta Sans", sans-serif;
      font-size: 0.68rem;
      font-weight: 500;
      letter-spacing: 0.02em;
      transition: border-color 0.3s, color 0.3s, background 0.3s;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }
    .utility-btn:hover, .utility-btn:active {
      border-color: var(--accent);
      color: var(--accent);
      background: var(--surface-up);
    }
    .utility-btn svg { width: 14px; height: 14px; fill: currentColor; flex-shrink: 0; }

    /* Dialog / Modal overlay */
    .dialog-overlay {
      position: fixed; inset: 0;
      background: rgba(8, 10, 16, 0.7);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      display: flex;
      align-items: center; justify-content: center;
      z-index: 10;
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
      transition: opacity 0.2s ease, visibility 0.2s;
    }
    .dialog-overlay.open {
      opacity: 1;
      visibility: visible;
      pointer-events: auto;
    }
    .dialog {
      background: var(--surface);
      border: 1px solid var(--border);
      border-radius: 16px;
      padding: 1.6rem;
      width: 300px;
      box-shadow: 0 24px 80px rgba(0,0,0,0.5), 0 0 1px rgba(255,255,255,0.05) inset;
      transform: scale(0.94) translateY(8px);
      opacity: 0;
      transition: transform 0.3s cubic-bezier(0.16, 1, 0.3, 1), opacity 0.2s ease;
    }
    .dialog-overlay.open .dialog {
      transform: scale(1) translateY(0);
      opacity: 1;
    }
    .dialog h3 {
      font-size: 1rem;
      font-weight: 600;
      margin-bottom: 1.1rem;
      color: var(--text-bright);
      letter-spacing: 0.02em;
    }
    .dialog input[type="text"] {
      width: 100%; padding: 0.55rem 0.8rem;
      border-radius: 10px;
      border: 1px solid var(--border);
      background: var(--bg);
      color: var(--text-bright);
      font-family: "Plus Jakarta Sans", sans-serif;
      font-size: 0.88rem;
      font-weight: 300;
      outline: none;
      margin-bottom: 1rem;
      transition: border-color 0.2s;
    }
    .dialog input[type="text"]:focus { border-color: var(--accent); }
    .dialog input[type="text"]::placeholder { color: var(--text-dim); }
    .dialog-btns { display: flex; gap: 0.5rem; justify-content: flex-end; }
    .dialog-btns button {
      padding: 0.45rem 1.1rem;
      border-radius: 10px;
      border: none;
      font-family: "Plus Jakarta Sans", sans-serif;
      font-size: 0.82rem;
      font-weight: 400;
      cursor: pointer;
      transition: border-color 0.2s, color 0.2s, background 0.2s;
    }
    .dialog-btns .cancel {
      background: var(--border);
      color: var(--text-muted);
    }
    .dialog-btns .cancel:hover { background: var(--border-light); color: var(--text); }
    .dialog-btns .save {
      background: var(--accent);
      color: var(--bg);
    }
    .dialog-btns .save:hover { background: var(--accent-bright); }

    /* QR modal */
    .qr-wrap {
      display: flex; flex-direction: column;
      align-items: center; gap: 1rem;
    }
    .qr-wrap svg {
      width: 160px; height: 160px;
      padding: 20px;
      background: #fff;
      border-radius: 16px;
      box-shadow: 0 4px 20px rgba(0,0,0,0.2);
    }
    .qr-url {
      font-size: 0.72rem;
      font-weight: 400;
      color: var(--text-dim);
      word-break: break-all;
      text-align: center;
      letter-spacing: 0.03em;
    }

    /* Install modal */
    .install-steps { text-align: left; }
    .install-steps .platform {
      margin-bottom: 0.8rem;
      padding: 0.8rem;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: rgba(255,255,255,0.015);
      transition: border-color 0.2s, color 0.2s, background 0.2s;
    }
    .install-steps .platform.highlight {
      border-color: var(--accent);
      background: var(--accent-glow);
    }
    .install-steps .platform h4 {
      font-family: "Plus Jakarta Sans", sans-serif;
      font-size: 0.82rem;
      font-weight: 500;
      color: var(--text-bright);
      margin-bottom: 0.5rem;
      display: flex; align-items: center; gap: 0.5rem;
    }
    .install-steps .platform ol {
      margin: 0; padding-left: 1.3rem;
      font-size: 0.78rem;
      font-weight: 300;
      color: var(--text-muted);
      line-height: 1.7;
    }
    .install-steps .platform ol strong {
      font-weight: 500;
      color: var(--text);
    }
    .install-steps .platform .step-icon {
      display: inline-block; width: 15px; height: 15px;
      vertical-align: -3px;
      fill: var(--accent);
    }
  </style>
</head>
<body>
  <div class="app">
    <h1>HushHush</h1>
    <div class="status" id="status"></div>

    <button class="play-btn" id="playBtn" aria-label="Play">
      <svg id="playIcon" viewBox="0 0 24 24"><polygon points="6,3 20,12 6,21"/></svg>
      <svg id="stopIcon" viewBox="0 0 24 24"><rect x="5" y="4" width="5" height="16" rx="1"/><rect x="14" y="4" width="5" height="16" rx="1"/></svg>
      <svg id="loadIcon" viewBox="0 0 24 24"><circle cx="12" cy="12" r="9" fill="none" stroke="currentColor" stroke-width="2" stroke-dasharray="42 14" stroke-linecap="round"><animateTransform attributeName="transform" type="rotate" from="0 12 12" to="360 12 12" dur="0.8s" repeatCount="indefinite"/></circle></svg>
    </button>

    <div class="section-label" style="border-top:none;margin-top:0.6rem;padding-top:0">Presets</div>
    <div class="presets" id="presets"></div>

    <div class="divider"></div>

    <div class="control">
      <label><span>Volume</span><span id="volVal">30%</span></label>
      <input type="range" id="volume" min="0" max="100" value="30">
    </div>
    <button class="customize-toggle" id="customizeToggle">
      Customize <span class="toggle-arrow">&#x25BE;</span>
    </button>
    <div class="advanced-controls" id="advancedControls">
      <div class="advanced-inner">
      <div class="colors" id="colors">
        <button class="color-btn active" data-color="white">White</button>
        <button class="color-btn" data-color="pink">Pink</button>
        <button class="color-btn" data-color="brown">Brown</button>
        <button class="color-btn" data-color="blue">Blue</button>
        <button class="color-btn" data-color="violet">Violet</button>
      </div>
      <div class="control">
        <label><span>Low Cut</span><span id="lowCutVal">Off</span></label>
        <input type="range" id="lowCut" min="0" max="500" value="0">
      </div>
      <div class="control">
        <label><span>High Cut</span><span id="highCutVal">Off</span></label>
        <input type="range" id="highCut" min="200" max="20000" value="20000">
      </div>
      <div class="control">
        <label><span>Modulation</span><span id="modVal">Off</span></label>
        <input type="range" id="modulation" min="0" max="100" value="0">
      </div>
      <div class="control">
        <label><span>Mod Speed</span><span id="modSpeedVal">Slow</span></label>
        <input type="range" id="modSpeed" min="1" max="100" value="15">
      </div>
      <div class="preset-actions">
        <button class="action-btn" id="savePreset">+ Save current</button>
      </div>
      </div>
    </div>

    <!-- Timer -->
    <div class="section-label">Sleep Timer</div>
    <div class="timer-row" id="timerRow">
      <button class="timer-btn active" data-min="0">Off</button>
      <button class="timer-btn" data-min="15">15m</button>
      <button class="timer-btn" data-min="30">30m</button>
      <button class="timer-btn" data-min="60">1h</button>
      <button class="timer-btn" data-min="120">2h</button>
    </div>

    <!-- Utility buttons -->
    <div class="utility-row">
      <button class="utility-btn" id="qrBtn" aria-label="QR Code">
        <svg viewBox="0 0 24 24"><path d="M3 3h8v8H3V3zm2 2v4h4V5H5zm9-2h8v8h-8V3zm2 2v4h4V5h-4zM3 14h8v8H3v-8zm2 2v4h4v-4H5zm12-2h2v2h-2v-2zm0 4h2v2h-2v-2zm-4 0h2v2h-2v-2zm4 4h2v2h-2v-2zm-4 0h2v2h-2v-2zm8-8h2v2h-2v-2zm0 4h2v2h-2v-2zm0 4h2v2h-2v-2z"/></svg>
        Share
      </button>
      <button class="utility-btn" id="installBtn" aria-label="Add to Home Screen">
        <svg viewBox="0 0 24 24"><path d="M18 15v3H6v-3H4v3c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2v-3h-2zm-1-4l-1.41-1.41L13 12.17V4h-2v8.17L8.41 9.59 7 11l5 5 5-5z"/></svg>
        Install
      </button>
    </div>
  </div>

  <!-- Save preset dialog -->
  <div class="dialog-overlay" id="dialogOverlay">
    <div class="dialog">
      <h3>Save Preset</h3>
      <input type="text" id="presetName" placeholder="Preset name" maxlength="24">
      <div class="dialog-btns">
        <button class="cancel" id="dialogCancel">Cancel</button>
        <button class="save" id="dialogSave">Save</button>
      </div>
    </div>
  </div>

  <!-- QR code dialog -->
  <div class="dialog-overlay" id="qrOverlay">
    <div class="dialog">
      <h3>Share HushHush</h3>
      <div class="qr-wrap">
        <svg viewBox="0 0 29 29" xmlns="http://www.w3.org/2000/svg">
          <rect width="29" height="29" fill="#fff" rx="1"/>
          <path d="M0,0h7v1h-7zM10,0h1v1h-1zM14,0h1v1h-1zM17,0h3v1h-3zM22,0h7v1h-7zM0,1h1v1h-1zM6,1h1v1h-1zM9,1h1v1h-1zM13,1h1v1h-1zM17,1h3v1h-3zM22,1h1v1h-1zM28,1h1v1h-1zM0,2h1v1h-1zM2,2h3v1h-3zM6,2h1v1h-1zM8,2h1v1h-1zM11,2h1v1h-1zM15,2h1v1h-1zM20,2h1v1h-1zM22,2h1v1h-1zM24,2h3v1h-3zM28,2h1v1h-1zM0,3h1v1h-1zM2,3h3v1h-3zM6,3h1v1h-1zM9,3h1v1h-1zM12,3h2v1h-2zM16,3h1v1h-1zM18,3h1v1h-1zM22,3h1v1h-1zM24,3h3v1h-3zM28,3h1v1h-1zM0,4h1v1h-1zM2,4h3v1h-3zM6,4h1v1h-1zM9,4h1v1h-1zM12,4h2v1h-2zM16,4h1v1h-1zM19,4h1v1h-1zM22,4h1v1h-1zM24,4h3v1h-3zM28,4h1v1h-1zM0,5h1v1h-1zM6,5h1v1h-1zM10,5h3v1h-3zM14,5h7v1h-7zM22,5h1v1h-1zM28,5h1v1h-1zM0,6h7v1h-7zM8,6h1v1h-1zM10,6h1v1h-1zM12,6h1v1h-1zM14,6h1v1h-1zM16,6h1v1h-1zM18,6h1v1h-1zM20,6h1v1h-1zM22,6h7v1h-7zM8,7h1v1h-1zM11,7h1v1h-1zM15,7h1v1h-1zM17,7h2v1h-2zM0,8h3v1h-3zM4,8h5v1h-5zM12,8h1v1h-1zM16,8h2v1h-2zM20,8h3v1h-3zM26,8h1v1h-1zM1,9h1v1h-1zM3,9h1v1h-1zM5,9h1v1h-1zM7,9h3v1h-3zM11,9h3v1h-3zM15,9h2v1h-2zM20,9h3v1h-3zM25,9h1v1h-1zM28,9h1v1h-1zM1,10h2v1h-2zM5,10h2v1h-2zM8,10h1v1h-1zM10,10h3v1h-3zM14,10h4v1h-4zM20,10h1v1h-1zM24,10h1v1h-1zM26,10h3v1h-3zM1,11h3v1h-3zM5,11h1v1h-1zM8,11h3v1h-3zM12,11h3v1h-3zM16,11h2v1h-2zM20,11h2v1h-2zM23,11h2v1h-2zM27,11h1v1h-1zM2,12h1v1h-1zM4,12h1v1h-1zM6,12h1v1h-1zM8,12h1v1h-1zM10,12h2v1h-2zM14,12h4v1h-4zM19,12h4v1h-4zM25,12h1v1h-1zM27,12h2v1h-2zM0,13h1v1h-1zM2,13h1v1h-1zM4,13h2v1h-2zM8,13h1v1h-1zM10,13h2v1h-2zM14,13h2v1h-2zM17,13h1v1h-1zM20,13h1v1h-1zM22,13h1v1h-1zM25,13h1v1h-1zM28,13h1v1h-1zM0,14h3v1h-3zM4,14h3v1h-3zM9,14h2v1h-2zM13,14h1v1h-1zM17,14h2v1h-2zM21,14h3v1h-3zM25,14h1v1h-1zM27,14h2v1h-2zM2,15h2v1h-2zM7,15h3v1h-3zM11,15h1v1h-1zM17,15h4v1h-4zM23,15h1v1h-1zM25,15h1v1h-1zM27,15h1v1h-1zM1,16h1v1h-1zM4,16h1v1h-1zM6,16h2v1h-2zM9,16h1v1h-1zM12,16h1v1h-1zM17,16h1v1h-1zM21,16h3v1h-3zM25,16h1v1h-1zM27,16h2v1h-2zM1,17h1v1h-1zM4,17h1v1h-1zM10,17h4v1h-4zM16,17h1v1h-1zM20,17h1v1h-1zM22,17h1v1h-1zM25,17h2v1h-2zM28,17h1v1h-1zM0,18h1v1h-1zM3,18h1v1h-1zM5,18h2v1h-2zM9,18h1v1h-1zM11,18h2v1h-2zM14,18h1v1h-1zM18,18h1v1h-1zM20,18h1v1h-1zM22,18h3v1h-3zM27,18h2v1h-2zM1,19h2v1h-2zM7,19h1v1h-1zM12,19h3v1h-3zM17,19h1v1h-1zM22,19h1v1h-1zM25,19h1v1h-1zM27,19h1v1h-1zM0,20h1v1h-1zM2,20h1v1h-1zM4,20h4v1h-4zM11,20h1v1h-1zM14,20h5v1h-5zM20,20h5v1h-5zM8,21h2v1h-2zM11,21h1v1h-1zM14,21h1v1h-1zM16,21h1v1h-1zM19,21h2v1h-2zM24,21h1v1h-1zM26,21h3v1h-3zM0,22h7v1h-7zM8,22h3v1h-3zM13,22h1v1h-1zM17,22h1v1h-1zM19,22h2v1h-2zM22,22h1v1h-1zM24,22h2v1h-2zM27,22h2v1h-2zM0,23h1v1h-1zM6,23h1v1h-1zM8,23h1v1h-1zM10,23h2v1h-2zM17,23h1v1h-1zM20,23h1v1h-1zM24,23h2v1h-2zM0,24h1v1h-1zM2,24h3v1h-3zM6,24h1v1h-1zM8,24h1v1h-1zM10,24h1v1h-1zM12,24h1v1h-1zM16,24h2v1h-2zM20,24h5v1h-5zM28,24h1v1h-1zM0,25h1v1h-1zM2,25h3v1h-3zM6,25h1v1h-1zM11,25h3v1h-3zM16,25h5v1h-5zM24,25h1v1h-1zM26,25h3v1h-3zM0,26h1v1h-1zM2,26h3v1h-3zM6,26h1v1h-1zM8,26h1v1h-1zM10,26h3v1h-3zM14,26h1v1h-1zM17,26h3v1h-3zM23,26h3v1h-3zM28,26h1v1h-1zM0,27h1v1h-1zM6,27h1v1h-1zM8,27h1v1h-1zM12,27h3v1h-3zM16,27h2v1h-2zM19,27h5v1h-5zM27,27h1v1h-1zM0,28h7v1h-7zM8,28h1v1h-1zM10,28h2v1h-2zM14,28h4v1h-4zM20,28h1v1h-1zM22,28h1v1h-1zM27,28h2v1h-2z" fill="#000"/>
        </svg>
        <div class="qr-url">hushhush.bunchmunch.rocks</div>
      </div>
      <div class="dialog-btns" style="margin-top: 1rem;">
        <button class="cancel" id="qrClose">Close</button>
      </div>
    </div>
  </div>

  <!-- Install dialog -->
  <div class="dialog-overlay" id="installOverlay">
    <div class="dialog" style="width: 320px;">
      <h3>Add to Home Screen</h3>
      <div class="install-steps">
        <div class="platform" id="chromeSteps">
          <h4>
            <svg class="step-icon" viewBox="0 0 24 24"><path d="M12 2a10 10 0 1 0 0 20 10 10 0 0 0 0-20zm0 3a5 5 0 0 1 4.7 3.25H12a5 5 0 0 0-4.33 2.5L5.46 7.2A7.97 7.97 0 0 1 12 5zm-7.9 7.5l2.2-3.81A5 5 0 0 0 12 17l-2.21 3.83A8 8 0 0 1 4.1 12.5zM12 19a5 5 0 0 1-1.44-.22l2.2-3.81a5 5 0 0 0 4.33-2.5l2.22 3.83A7.97 7.97 0 0 1 12 19z"/></svg>
            Chrome (Recommended)
          </h4>
          <ol>
            <li>Open in <strong>Chrome</strong></li>
            <li>Tap <svg class="step-icon" viewBox="0 0 24 24"><path d="M12 8c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm0 2c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2zm0 6c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/></svg> <strong>Menu</strong> (top right)</li>
            <li>Tap <strong>"Add to Home Screen"</strong></li>
            <li>Lock screen controls + artwork will work</li>
          </ol>
        </div>
        <div class="platform" id="safariSteps">
          <h4>
            <svg class="step-icon" viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1.27 15.58l-1.54-5.77 5.77 1.54-1.54 5.77L12 14.5l-1.27 3.08zM12 13a1 1 0 1 1 0-2 1 1 0 0 1 0 2zm1.27-6.58l1.54 5.77-5.77-1.54 1.54-5.77L12 9.5l1.27-3.08z"/></svg>
            Safari
          </h4>
          <ol>
            <li>Open in <strong>Safari</strong></li>
            <li>Tap <svg class="step-icon" viewBox="0 0 24 24"><path d="M16 5l-1.42 1.42-1.59-1.59V16h-2V4.83L9.42 6.42 8 5l4-4 4 4zm4 5v11c0 1.1-.9 2-2 2H6c-1.11 0-2-.9-2-2V10c0-1.11.89-2 2-2h3v2H6v11h12V10h-3V8h3c1.1 0 2 .89 2 2z"/></svg> <strong>Share</strong></li>
            <li>Tap <strong>"Add to Home Screen"</strong></li>
            <li>Controls work, but no artwork on lock screen</li>
          </ol>
        </div>
      </div>
      <div class="dialog-btns" style="margin-top: 0.5rem;">
        <button class="cancel" id="installClose">Close</button>
      </div>
    </div>
  </div>

  <!-- Two audio elements for gapless double-buffered looping -->
  <audio id="audioA" playsinline preload="auto" loop></audio>
  <audio id="audioB" playsinline preload="auto" loop></audio>

  <script src="state.js?v=23"></script>
  <script src="crossfade.js?v=23"></script>
  <script src="app.js?v=23"></script>
</body>
</html>
